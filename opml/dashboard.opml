<?xml encoding="ISO-8859-1" version="1.0"?>
<!-- OPML generated by OPML Editor v0.75 on 6/9/14; 11:34:22 AM -->
<opml version="2.0">
	<head>
		<title>dashboard.html</title>
		<expansionState></expansionState>
		<vertScrollState>1</vertScrollState>
		<windowTop>300</windowTop>
		<windowLeft>700</windowLeft>
		<windowBottom>900</windowBottom>
		<windowRight>1500</windowRight>
		</head>
	<body text="dashboard.html">
		<outline text="&lt;html&gt; ">
			<outline text="&lt;head&gt;">
				<outline text="&lt;title&gt;River4 dashboard&lt;/title&gt;"></outline>
				<outline text="&lt;link href=&quot;http://fargo.io/code/ranchoFont.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;"></outline>
				<outline text="&lt;link href=&quot;http://fargo.io/code/bootstrap.css&quot; rel=&quot;stylesheet&quot;&gt;"></outline>
				<outline text="&lt;script src=&quot;http://fargo.io/code/jquery-1.9.1.min.js&quot;&gt;&lt;/script&gt;"></outline>
				<outline text="&lt;script src=&quot;http://fargo.io/code/bootstrap.min.js&quot;&gt;&lt;/script&gt; "></outline>
				<outline text="&lt;style&gt;">
					<outline text="body {">
						<outline text="background-color: whitesmoke;"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text=".tableStats {">
						<outline text="font-size: 18px;"></outline>
						<outline text="border: 1px solid gainsboro;"></outline>
						<outline text="padding: 10px;"></outline>
						<outline isComment="true" text="width: 500px;"></outline>
						<outline isComment="true" text="margin-left: auto;"></outline>
						<outline isComment="true" text="margin-right: auto;"></outline>
						<outline text="margin-top: 125px;"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text=".tdLabel {">
						<outline text="text-align: right;"></outline>
						<outline text="margin-right: 3px;"></outline>
						<outline text="width: 50%;"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text=".tdValue {">
						<outline text="text-align: left;"></outline>
						<outline text="margin-left: 3px;"></outline>
						<outline text="width: 50%;"></outline>
						<outline text="margin-right: 10px;"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text=".divSecondsCounter {">
						<outline text="font-size: 16px;"></outline>
						<outline text="margin: 10px;"></outline>
						<outline text="height: 1em;"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text="&lt;/style&gt;"></outline>
					</outline>
				<outline text="&lt;script&gt;">
					<outline text="var urlFeedStats = &quot;feedstats&quot;;"></outline>
					<outline text="var urlDynamicStats = &quot;serverdata&quot;;"></outline>
					<outline text="var ctSeconds = 0, ctMinutes = 0;"></outline>
					<outline text=""></outline>
					<outline text="var serverData, feedsArray, serverStatus;"></outline>
					<outline text=""></outline>
					<outline text="[[http://fargo.io/code/node/shared/utils.js]]"></outline>
					<outline text=""></outline>
					<outline text="function findInFeedsArray (urlfeed) {">
						<outline text="if (feedsArray != undefined) {">
							<outline text="var lowerfeed = urlfeed.toLowerCase (), flfound = false, ixfeed;"></outline>
							<outline text="for (var i = 0; i &lt; feedsArray.length; i++) {">
								<outline text="if (feedsArray [i].url.toLowerCase () == lowerfeed) {">
									<outline text="var feedstats = feedsArray [i];"></outline>
									<outline text="return (feedstats);"></outline>
									<outline text="}"></outline>
									</outline>
								<outline text="}"></outline>
								</outline>
							<outline text="}"></outline>
							</outline>
						<outline text="return (undefined);"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text="function updateStats () {">
						<outline text="readHttpFile (urlDynamicStats, function (jsontext) {">
							<outline text="var now = new Date ();"></outline>
							<outline text="serverData = new Object ();"></outline>
							<outline text="serverData.stats = JSON.parse (jsontext);"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idCtFeedReads&quot;).html (stringAddCommas (serverData.stats.ctFeedReadsThisRun));"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idCtStoriesAdded&quot;).html (stringAddCommas (serverData.stats.ctStoriesAddedThisRun));"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idAggregator&quot;).html (serverData.stats.aggregator);"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" isComment="true" pgfnum="1226" text="$(&quot;#idThreadCount&quot;).html (serverData.stats.ctActiveThreads);"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idHttpSocketCount&quot;).html (serverData.stats.ctHttpSockets);"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idCtHitsThisRun&quot;).html (stringAddCommas (serverData.stats.ctHitsThisRun));"></outline>
							<outline text="{ //hours server up">
								<outline text="var s;"></outline>
								<outline text="if (serverData.stats.ctHoursServerUp &lt; 1) {">
									<outline text="s = (serverData.stats.ctHoursServerUp * 60).toFixed (2) + &quot; minutes&quot;;"></outline>
									<outline text="}"></outline>
									</outline>
								<outline text="else {">
									<outline text="s = serverData.stats.ctHoursServerUp.toFixed (2) + &quot; hours&quot;"></outline>
									<outline text="}"></outline>
									</outline>
								<outline text="}"></outline>
								<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idHoursServerUp&quot;).html (s);"></outline>
								</outline>
							<outline isComment="true" text="{ //how long was last scan?">
								<outline created="Fri, 01 Feb 2013 00:33:21 GMT" pgfnum="18031" text="var scanbegin = new Date (serverData.stats.whenLastScanBegin);"></outline>
								<outline created="Fri, 01 Feb 2013 00:33:21 GMT" pgfnum="18031" text="var scanend = new Date (serverData.stats.whenLastScanEnd);"></outline>
								<outline created="Fri, 01 Feb 2013 22:41:19 GMT" pgfnum="18089" text="var ctsecs = (scanend - scanbegin) / 6000;"></outline>
								<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idHowLongLastScan&quot;).html (ctsecs);"></outline>
								<outline text="}"></outline>
								</outline>
							<outline text="{ //how long since last read">
								<outline isComment="true" text="var secs = secondsSince (serverData.stats.whenLastFeedRead), timemsg = secs + &quot; seconds&quot;;"></outline>
								<outline text="var secs = serverData.stats.secsSinceLastFeedRead, timemsg = secs + &quot; seconds&quot;;"></outline>
								<outline text=""></outline>
								<outline text="if (secs &gt; 60) {">
									<outline text="timemsg = (secs / 60).toFixed (2) + &quot; minutes&quot;;"></outline>
									<outline text="}"></outline>
									</outline>
								<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idTimeSinceLastFeedRead&quot;).html (timemsg);"></outline>
								<outline text="}"></outline>
								</outline>
							<outline isComment="true" text="//feed reads per minute">
								<outline text="var minutenum = now.getMinutes () - 1, readsperminute = 0;"></outline>
								<outline text="if (minutenum &gt; 0) {">
									<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="readsperminute = (serverData.stats.ctFeedReadsLastHour / minutenum).toFixed (2);"></outline>
									<outline text="}"></outline>
									</outline>
								<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idCtFeedReadsPerMinute&quot;).html (readsperminute);"></outline>
								</outline>
							<outline text="//last-read-feed">
								<outline text="if (feedsArray != undefined) {">
									<outline text="var lastreadlink = serverData.stats.lastFeedRead, feedstats = findInFeedsArray (lastreadlink);"></outline>
									<outline text="if (feedstats != undefined) {">
										<outline text="lastreadlink = &quot;&lt;a href=\&quot;&quot; + lastreadlink + &quot;\&quot;&gt;&quot; + feedstats.title + &quot;&lt;/a&gt;&quot;"></outline>
										<outline text="}"></outline>
										</outline>
									<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idLastFeedRead&quot;).html (lastreadlink);"></outline>
									<outline text="}"></outline>
									</outline>
								</outline>
							<outline text="//last story added">
								<outline text="if (serverData.stats.lastStoryAdded != undefined) {">
									<outline text="var item = serverData.stats.lastStoryAdded;"></outline>
									<outline text="if (item.title != undefined) {">
										<outline text="var s = maxStringLength (item.title, 50);"></outline>
										<outline text="if (item.link != undefined) {">
											<outline text="s = &quot;&lt;a href=\&quot;&quot; + item.link + &quot;\&quot; target=\&quot;_blank\&quot;&gt;&quot; + s + &quot;&lt;/a&gt;&quot;;"></outline>
											<outline text="}"></outline>
											</outline>
										<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idLastStoryAdded&quot;).html (s);"></outline>
										<outline text="}"></outline>
										</outline>
									<outline text="}"></outline>
									</outline>
								</outline>
							<outline text="});"></outline>
							</outline>
						<outline text="readHttpFile (urlFeedStats, function (jsontext) {">
							<outline text="var now = new Date ();"></outline>
							<outline text="feedsArray = JSON.parse (jsontext);"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idCtFeeds&quot;).html (feedsArray.length);"></outline>
							<outline text="});"></outline>
							</outline>
						<outline text="}"></outline>
						</outline>
					<outline text="function updateFeedStats () {">
						<outline text="readHttpFile (urlFeedStats, function (jsontext) {">
							<outline text="var now = new Date ();"></outline>
							<outline text="feedsArray = JSON.parse (jsontext);"></outline>
							<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idCtFeeds&quot;).html (feedsArray.length);"></outline>
							<outline text="});"></outline>
							</outline>
						<outline text="}"></outline>
						</outline>
					<outline text="function everySecond () {">
						<outline created="Wed, 03 Apr 2013 16:41:18 GMT" pgfnum="1226" text="$(&quot;#idSecondsCounter&quot;).html (ctSeconds++);"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text="function everyTwoSeconds () {">
						<outline text="updateStats ();"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text="function everyMinute () {">
						<outline text="updateFeedStats ();"></outline>
						<outline text="}"></outline>
						</outline>
					<outline text="function startup () {">
						<outline text="updateFeedStats ();"></outline>
						<outline text="updateStats ();"></outline>
						<outline text="setInterval (function () {everySecond ()}, 1000); "></outline>
						<outline text="setInterval (function () {everyTwoSeconds ()}, 2000); "></outline>
						<outline text="setInterval (function () {everyMinute ()}, 60000); "></outline>
						<outline text="}"></outline>
						</outline>
					<outline text=""></outline>
					<outline text="&lt;/script&gt;"></outline>
					</outline>
				<outline text="&lt;/head&gt;"></outline>
				</outline>
			<outline text="&lt;body&gt;">
				<outline text="&lt;div class=&quot;divSecondsCounter&quot; id=&quot;idSecondsCounter&quot;&gt;&lt;/div&gt;"></outline>
				<outline text="&lt;center&gt;">
					<outline text="&lt;table class=&quot;tableStats&quot; cellspacing=&quot;0&quot; cellpadding=&quot;5&quot; border=&quot;0&quot;&gt;">
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;Aggregator:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idAggregator&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;Server up:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idHoursServerUp&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;New stories (this run):&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idCtStoriesAdded&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;Feeds read (this run):&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idCtFeedReads&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline isComment="true" text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;Feed reads, per minute:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idCtFeedReadsPerMinute&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;# of feeds we're following:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idCtFeeds&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot; valign=&quot;top&quot;&gt;Last feed read:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idLastFeedRead&quot;&gt;&lt;/span&gt;&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot; valign=&quot;top&quot;&gt;Last story added:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idLastStoryAdded&quot;&gt;&lt;/span&gt;&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;How long since last feed read:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idTimeSinceLastFeedRead&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;Number of hits (this run):&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idCtHitsThisRun&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;Number of HTTP sockets:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idHttpSocketCount&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline isComment="true" text="&lt;tr&gt;">
							<outline text="&lt;td class=&quot;tdLabel&quot;&gt;Number of concurrent threads:&lt;/td&gt;"></outline>
							<outline text="&lt;td class=&quot;tdValue&quot;&gt;&lt;span id=&quot;idThreadCount&quot;&gt;&lt;/span&gt;.&lt;/td&gt;"></outline>
							<outline text="&lt;/tr&gt;"></outline>
							</outline>
						<outline text="&lt;/table&gt;"></outline>
						</outline>
					<outline text="&lt;/center&gt;"></outline>
					</outline>
				<outline text="&lt;script&gt;">
					<outline text="startup ();"></outline>
					<outline text="&lt;/script&gt;"></outline>
					</outline>
				<outline text="&lt;/body&gt;"></outline>
				</outline>
			<outline text="&lt;/html&gt;"></outline>
			</outline>
		</body>
	</opml>
